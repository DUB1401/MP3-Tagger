# Настройка логов
Melon позволяет отправлять отчёты об ошибках в чат Telegram. Всё, что вам нужно, это открыть файл _logger.json_ в директории конфигураций конкретного парсера и занести туда настройки в соответствии с предоставленной документацией.

Помните, что Melon обрабатывает только записи в лог через поставляемые порты, потому ошибки и предупреждения из сторонних библиотек не могут быть отправлены на данный момент.

## Бот Telegram
Данные параметры располагаются под ключом `telebot` и указывают данные бота и целевого чата.
___
```JSON
"enable": false
```
Переключает отправку отчётов об ошибках в Telegram.
___
```JSON
"bot_token": ""
```
Сюда необходимо занести токен бота Telegram (можно получить у [BotFather](https://t.me/BotFather)).
___
```JSON
"chat_id": 0
```
Сюда необходимо занести ID чата Telegram, в который будут направляться отчёты (можно узнать у [Chat ID Bot](https://t.me/chat_id_echo_bot)).

> [!NOTE]  
> Если чат групповой, бот должен являться администратором!
___
```JSON
"comment": ""
```
Дополнительный комментарий, который указывается статически и добавляется к каждому отчёту.
___
```JSON
"attach_log": true
```
Указывает, нужно ли прикреплять к отчёту файл лога на момент возникновения ошибки.

## Правила отправки отчётов
Для CLI предоставлен список правил, позволяющий регулировать отправку отчётов. Настройки размещены под ключом `commands`, соответственно названию команды.
___
```JSON
"rule": 0
```
Задаёт правило обращения с логом.
| **Правило** | **Значение**                                       |
|-------------|----------------------------------------------------|
| 0           | Всегда сохранять.                                  |
| 1           | Сохранять, если имеются ошибки.                    |
| 2           | Сохранять, если имеются предупреждения или ошибки. |
| 3           | Удалять.                                           |
___
```JSON
"ignored_requests_errors": []
```
Здесь указываются коды [ошибок HTTP](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP), отчёты о которых не нужно высылать в Telegram. Имейте в виду, что в дополнении к перечисленным существует код `null`, генерирующийся при исключении в коде, а не ошибке сетевого протокола.
___
```JSON
"title_not_found": true
```
Указывает, нужно ли отправлять отчёт о том, что тайтл не найден в источнике. Может дублировать ошибку HTTP с кодом 404!
___
```JSON
"warnings": false
```
Указывает, нужно ли отправлять отчёты о предупреждениях.